## Customize the test machine
machine:

  node:
    version: 6.9.0

  # Add some environment variables
  environment:
    CIRCLE_ENV: test
    NODE_ENV: test


# as per: https://gist.github.com/citrus/cc1f7d55da8abc82ed0a
dependencies:
  pre:
    - export PATH=/usr/local/phantomjs-2.0.0/bin:$PATH
    - npm config set spin false
    - npm install -g npm
    - npm install -g bower
  override:
    - npm install
    - bower install
  cache_directories:
    - "node_modules"
    - "bower_components"

test:
  override:
    - npm test
# end as per

# Customize deployment commands
deployment:
  production:
    branch: master
    commands:
      - ssh -p 7826 -t circleci@137.74.112.216 'bash -i -c "~/tech-test-emberjs/vendor/deploy_master.sh"'
